using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Xamarin.Forms;

namespace TechDashboard.Views
{
    class MainMenuItem
    {
        public string Title { get; set; }

        public string IconSource { get; set; }

        public Type TargetType { get; set; }
    }

	class MainMenuCell : ViewCell
	{
		public MainMenuCell()
		{
			Color forecolor = Color.White;
			Image cellImage = new Image();
			cellImage.VerticalOptions = LayoutOptions.Center;
			cellImage.SetBinding(Image.SourceProperty, "IconSource");

			Label cellLabel = new Label() {
				FontFamily = Device.OnPlatform("OpenSans-Bold", null, null),
				TextColor = forecolor,
				VerticalOptions = LayoutOptions.Center
			};
			cellLabel.SetBinding(Label.TextProperty, "Title");

			View = new StackLayout() {
				BackgroundColor = Color.FromHex("#2980B9"),
				Orientation = StackOrientation.Horizontal,
				Padding = new Thickness(0,0,0,20),
				Children = {
					cellImage, 
					cellLabel
				}
			};
		}
	}

    public class MainMenu : ContentPage
    {
        ListView _listView;
        public ListView ListView
        { 
            get
            {
                return _listView;
            }
        }

        MainMenuItem _menuItemTechnician;
        MainMenuItem _menuItemSchedule;
        //MainMenuItem _menuItemDepart;
        //MainMenuItem _menuItemPartsList;
        //MainMenuItem _menuItemNotes;
        MainMenuItem _menuItemExpenses;
        MainMenuItem _menuItemSmsMessages;
        MainMenuItem _menuItemExit;
		MainMenuItem _menuItemMisc;

        List<MainMenuItem> _masterPageItems;

        public MainMenu()
        {
            Title = "Menu";

            _masterPageItems = new List<MainMenuItem>();

            _menuItemTechnician = new MainMenuItem
            {
                Title = "TECHNICIAN",
                IconSource = "worker-64.png",
                TargetType = typeof(TechnicianPage)
            };
            
			_menuItemSchedule = new MainMenuItem
            {
                Title = "SCHEDULE",
                IconSource = "calendar-3-64.PNG",
                TargetType = typeof(SchedulePage)
            };

			_menuItemMisc = new MainMenuItem {
				Title = "MISC TIME",
				IconSource = "time-8-64.png",
				TargetType = typeof(MiscellaneousTimePage)
			};
            
			_menuItemExpenses = new MainMenuItem
            {
                Title = "EXPENSES",
                IconSource = "banknotes-64.PNG",
                TargetType = typeof(ExpensesListPage)
            };
            
			_menuItemSmsMessages = new MainMenuItem
            {
                Title = "SMS MESSAGE",
                IconSource = "message-2-64.PNG",
                TargetType = typeof(SmsMessagePage)
            };
            
			_menuItemExit = new MainMenuItem
            {
                Title = "EXIT",
                IconSource = "exit-64.png",
                TargetType = typeof(object)
            };

            _masterPageItems.Add(_menuItemTechnician);
            _masterPageItems.Add(_menuItemSchedule);
			_masterPageItems.Add(_menuItemMisc);
            _masterPageItems.Add(_menuItemExpenses);
            _masterPageItems.Add(_menuItemSmsMessages);
            _masterPageItems.Add(_menuItemExit);

			var dataTemplate = new DataTemplate(typeof(MainMenuCell));

            _listView = new ListView
            {
                ItemsSource = _masterPageItems,
                /*ItemTemplate = new DataTemplate(() => {
                    var imageCell = new ImageCell();
                    imageCell.SetBinding(TextCell.TextProperty, "Title");
                    imageCell.SetBinding(ImageCell.ImageSourceProperty, "IconSource");
                    return imageCell;
                }),*/
				HasUnevenRows = true,
				ItemTemplate = dataTemplate,
				SeparatorVisibility = SeparatorVisibility.None,
				VerticalOptions = LayoutOptions.StartAndExpand,
				BackgroundColor = Color.FromHex("#2980b9")
            };

			StackLayout containerStackLayout = new StackLayout() {
				VerticalOptions = LayoutOptions.FillAndExpand,
				BackgroundColor = Color.FromHex("#2980b9"),
				Children = { 
					_listView
				}
			};

            Padding = new Thickness(0, 40, 0, 0);
            Content = new StackLayout
            {
				BackgroundColor = Color.FromHex("#2980B9"),
				Padding = 20,
				VerticalOptions = LayoutOptions.Fill,
                Children = {
                    containerStackLayout
                }
            };
			BackgroundColor = Color.FromHex("#2980B9");
        }
    }
}
